# 餐厅推荐系统设计文档

## 概述
本文档详细说明了基于思维链(Chain of Thought, CoT)的餐厅推荐系统提示词设计过程。该系统专门设计用于测试语言模型处理复杂偏好-限制场景的能力，避免简单的类别匹配推荐。

## 设计理念
基于CSDN文章《Prompt提示词技巧：如何使用思维链COT巧妙提升LLM输出效果》的见解，我们采用了以下设计策略：

### 1. 核心组件设计
- **Profile（角色定位）**
  - 明确专业身份：美食推荐专家
  - 强调核心能力：食材特性分析、烹饪工艺理解
  - 避免表面化描述，突出深度理解

- **Goals（目标设定）**
  - 安全性优先
  - 个性化推荐
  - 风险预防
  - 偏好满足

- **Skills（技能权重）**
  - 使用1-10数字权重明确重要性
  - 强调深度分析而非表面匹配
  - 突出安全评估能力

- **Constraints（约束条件）**
  - 同样采用权重系统
  - 明确禁止简单类别匹配
  - 强调食材相互作用分析

### 2. 推理流程设计
- **三步推理法**
  1. 信息分析
     - 深入理解限制
     - 解析真实偏好
     - 挖掘历史模式
  
  2. 推荐评估
     - 安全性检查
     - 相互作用分析
     - 偏好符合度评估
  
  3. 最终决策
     - 风险控制
     - 替代方案
     - 详细解释

### 3. 示例设计
- **复杂场景示范**
  - 多重偏好-限制冲突
  - 隐藏风险识别
  - 详细推理过程
  - 完整输出格式

## 技术实现

### 技术栈要求
1. 语言模型要求
   - 支持复杂JSON输入输出
   - 具备上下文理解能力
   - 支持中文自然语言处理

2. 开发环境
   - Python 3.12+
   - JSON处理库
   - 测试框架

### 输入输出格式
```json
// 输入格式
{
  "current_order": ["当前订单"],
  "preferences": ["偏好列表"],
  "restrictions": ["限制列表"],
  "order_history": ["历史订单"]
}

// 输出格式
{
  "analysis": {
    "preference_conflicts": [],
    "restriction_violations": [],
    "pattern_insights": []
  },
  "recommendations": [],
  "special_notes": ""
}
```

## 实施时间估算
1. 前期准备（1天）
   - 环境搭建：2小时
   - 依赖安装：1小时
   - 基础测试：5小时

2. 开发阶段（2天）
   - 提示词设计：4小时
   - 测试用例开发：6小时
   - 初步测试：6小时

3. 优化阶段（2天）
   - 性能测试：4小时
   - 边缘案例处理：6小时
   - 文档完善：6小时

总计：5天

## 创新特点
1. 权重系统
   - 使用数字权重替代模糊语义
   - 明确优先级排序
   - 便于模型理解和执行

2. 深度分析
   - 避免类别匹配
   - 关注食材特性
   - 考虑烹饪工艺影响

3. 安全机制
   - 多层次风险识别
   - 食材相互作用分析
   - 完整的替代方案机制

## 评估标准
1. 安全性：100%识别风险
2. 推理质量：完整的分析步骤
3. 推荐准确性：符合用户真实需求
4. 创新性：避免简单匹配

## 运维说明
1. 日常维护
   - 定期更新食材数据库
   - 监控模型性能
   - 收集用户反馈

2. 故障处理
   - 输入格式错误处理
   - 推理过程中断处理
   - 替代方案准备

3. 性能优化
   - 响应时间优化
   - 资源占用监控
   - 并发处理能力

## 未来优化方向
1. 扩展权重系统
   - 引入更细粒度的权重
   - 动态权重调整机制
   - 用户反馈权重优化

2. 增强推理能力
   - 添加更多推理步骤
   - 优化推理逻辑
   - 增加边缘案例处理

3. 知识库扩展
   - 扩充食材数据库
   - 添加季节性考虑
   - 增加地域特色
