# Prompt提示词技巧：思维链(CoT)在LLM中的应用总结

## 一、核心发现
1. 结构化Prompt的重要性
   - Profile（角色定位）
   - Goals（目标设定）
   - Constraints（约束条件）
   - Skills（技能描述）
   - Workflows（工作流程）
   - OutputFormat（输出格式）

2. 权重系统替代模糊语义
   - 使用1-10数字权重
   - 明确优先级排序
   - 避免"必须"、"应该"等模糊词

3. Zero-shot vs One-shot
   - GPT-4对Zero-shot效果更好
   - GPT-3.5需要更多示例引导

## 二、实践案例：餐厅推荐系统

### 原始Prompt示例
```
你是一个专业的餐厅推荐系统。你的任务是基于顾客的当前购物车内容、历史购物数据以及门店的热销和促销商品信息，从提供的菜单中推荐最合适的追加菜品。

可选菜品菜单：
{
"特色菜": [
  {"name": "红烧肉", "price": 68, "description": "精选五花肉，口感软烂"},
  {"name": "东坡肘子", "price": 88, "description": "传统工艺，肥而不腻"}
],
"川菜": [
  {"name": "水煮鱼", "price": 88, "description": "麻辣鲜香，鱼肉鲜嫩"},
  {"name": "麻婆豆腐", "price": 38, "description": "麻辣适中，下饭首选"}
]
}
```

问题：
- 依赖简单类别匹配
- 缺乏推理过程
- 没有风险评估

### 优化后的Prompt
```
## Profile
- Role: 美食推荐专家
- Description: 深度理解餐饮搭配艺术，精通食材特性、口感平衡和饮食健康的专业推荐系统

## Skills [权重1-10]
- 食材特性分析能力 (10)
- 烹饪工艺理解 (9)
- 口味组合艺术 (8)
- 饮食安全评估 (10)

## Constraints [权重1-10]
- 严格遵守饮食限制 (10)
- 禁止简单类别匹配 (9)
- 考虑食材相互作用 (9)

让我们一步步思考：
1. 首先分析顾客信息...
2. 评估每个潜在推荐...
3. 确定最终推荐...
```

### 效果对比
1. GPT-3.5
   - 原始Prompt：简单类别匹配，忽视风险
   - 优化Prompt：能识别基本风险，但推理不够深入

2. GPT-4
   - 原始Prompt：有基本推理，但依赖类别
   - 优化Prompt：深度分析，识别隐藏风险

## 三、关键优化技巧

1. 推理过程设计
   - 明确步骤划分
   - 每步都有具体任务
   - 强制深度分析

2. 权重系统应用
   - 技能权重明确重要性
   - 约束权重指导决策
   - 数字化模糊语义

3. 输出格式规范
```json
{
  "analysis": {
    "preference_conflicts": [],
    "restriction_violations": [],
    "pattern_insights": []
  },
  "recommendations": [],
  "special_notes": ""
}
```

## 四、测试用例设计

1. 隐藏成分冲突
```json
{
  "current_order": ["红烧狮子头"],
  "preferences": ["不吃葱姜蒜"],
  "restrictions": ["花生过敏"],
  "order_history": ["糖醋排骨", "红烧肉"]
}
```

2. 复杂偏好限制组合
```json
{
  "current_order": ["麻婆豆腐"],
  "preferences": ["喜欢豆制品", "偏好麻辣"],
  "restrictions": ["不能吃辣", "高嘌呤"],
  "order_history": ["水煮牛肉", "麻辣香锅"]
}
```

## 五、实施建议

1. 前期准备
   - 环境搭建（2小时）
   - 依赖安装（1小时）
   - 基础测试（5小时）

2. 开发阶段
   - 提示词设计（4小时）
   - 测试用例开发（6小时）
   - 初步测试（6小时）

3. 优化阶段
   - 性能测试（4小时）
   - 边缘案例处理（6小时）
   - 文档完善（6小时）

## 六、未来优化方向

1. 扩展权重系统
   - 更细粒度的权重
   - 动态权重调整
   - 用户反馈优化

2. 增强推理能力
   - 更多推理步骤
   - 优化推理逻辑
   - 边缘案例处理

3. 知识库扩展
   - 食材数据库
   - 季节性考虑
   - 地域特色
